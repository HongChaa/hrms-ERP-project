
-- 1. 사원테이블
CREATE TABLE HR_EMPLOYEES(
EMP_NO INT(10) AUTO_INCREMENT,
EMP_NAME VARCHAR(20) NOT NULL,
EMP_BIRTH_DAY DATE,
EMP_HIRE_DATE DATE,
EMP_EMAIL VARCHAR(30),
EMP_GENDER CHAR(1),
EMP_SALARY INT(15),
EMP_PHONE VARCHAR(30),
EMP_MY_BOSS INT(10),
POS_CODE INT(5),
CLUB_CODE INT(10),
ROLE_CODE INT(5),
constraint PK_EMP_NO PRIMARY KEY (EMP_NO)
);




-- 2. 사원 계정
CREATE table HR_ACCOUNT(
ACC_PASSWORD VARCHAR(150),
EMP_NO INT(10)
);


-- 3. 직급 테이블
create table HR_POSITION(
POS_CODE INT(5),
POS_NAME VARCHAR(20),
constraint PK_POS_CODE primary key (POS_CODE)
);

-- 4. 부서 테이블
create table HR_DEPARTMENT(
DEPT_CODE INT(3),
DEPT_NAME VARCHAR(30),
constraint PK_DEPT_CODE primary key (DEPT_CODE)
);

-- 5. 게시판
CREATE TABLE HR_BOARD (
  BOARD_NO INT(10) AUTO_INCREMENT,
  BD_TYPE VARCHAR(20),
  BD_TITLE VARCHAR(100),
  BD_CONTENT VARCHAR(1000),
  BD_DATE DATETIME DEFAULT CURRENT_TIMESTAMP,
  EMP_NO INT(10),
  constraint PK_BOARD_NO PRIMARY KEY (BOARD_NO)
);




-- 6. 댓글테이블
create table HR_REPLY(
REP_NO INT(10),
REP_CONTENT VARCHAR(1000),
REP_DATE DATETIME DEFAULT CURRENT_TIMESTAMP,
BOARD_NO INT(10),
EMP_NO INT(10),
constraint PK_REP_NO primary key (REP_NO)
);



-- 7. 동호회 테이블
create table HR_CLUB(
CLUB_CODE INT(10),
CLUB_NAME VARCHAR(30),
EMP_NO INT(10),
constraint PK_CLUB_CODE primary key (CLUB_CODE)
);



-- 8. 동호회 게시판
create table HR_CLUB_BOARD(
CB_NO INT(10) auto_increment,
CB_TITLE VARCHAR(100),
CB_CONTENT VARCHAR(1000),
CB_DATE DATETIME default CURRENT_TIMESTAMP,
CB_URL VARCHAR(1000),
EMP_NO INT(10),
CLUB_CODE INT(10),
constraint PK_CB_NO primary key (CB_NO)
);


-- 9. 동호회 게시판 댓글 테이블
create table HR_CLUB_REPLY(
CLUB_REP_NO INT(10),
CLUB_REP_CONTENT VARCHAR(1000),
CLBU_REP_DATE DATETIME default CURRENT_TIMESTAMP,
BOARD_NO INT(10),
EMP_NO INT(10),
constraint PK_CLUB_REP_NO primary key (CLUB_REP_NO)
);


-- 10. 직책 테이블
create table HR_ROLE(
ROLE_CODE INT(5),
ROLE_NAME INT(5),
constraint PK_ROLE_CODE primary key (ROLE_CODE)
);

-- 11. 받은 결재 테이블
create table HR_CONFIRM_IN(
CIN_NO INT(10),
CIN_TITLE VARCHAR(100) not null,
CIN_CONTENT VARCHAR(1000) not null,
CIN_DATE DATETIME default CURRENT_TIMESTAMP,
CIN_CHECK_DATE DATETIME default CURRENT_TIMESTAMP,
CIN_STATUS CHAR(1) not null,
COUT_NO INT(3),
EMP_NO INT(10),
constraint PK_CIN_NO primary key (CIN_NO)
);



-- 12. 보낸 결재 테이블
create table HR_CONFIRM_OUT(
COUT_NO INT(5) auto_increment,
COUT_TITLE VARCHAR(100) not null,
COUT_CONTENT VARCHAR(1000) not null,
COUT_DATE DATETIME default CURRENT_TIMESTAMP,
COUT_CHECK_DATE DATETIME default CURRENT_TIMESTAMP,
COUT_STATUS CHAR(1) not null,
EMP_NO INT(10),
constraint PK_COUT_NO primary key (COUT_NO)
);



-- 13번 메일 테이블
create table HR_EMAIL(
MAIL_NO INT(3) auto_increment,
MAIL_TO VARCHAR(50),
MAIL_FROM VARCHAR(50),
MAIL_TITLE VARCHAR(100) not null,
MAIL_CONTENT VARCHAR(1000)not null,
MAIL_DATE DATETIME default CURRENT_TIMESTAMP,
MAIL_STATUS CHAR(1),
EMP_NO INT(10),
constraint PK_MAIL_NO primary key (MAIL_NO)
);


-- FK ADD query

alter TABLE HR_EMPLOYEES add constraint FK_HR_EMPLOYEES_EMP_MY_BOSS
FOREIGN KEY (EMP_MY_BOSS) REFERENCES HR_EMPLOYEES(EMP_NO)on update cascade;

alter TABLE HR_EMPLOYEES add constraint FK_HR_EMPLOYEES_POS_CODE
FOREIGN KEY (POS_CODE) REFERENCES HR_POSITION(POS_CODE)on update cascade;

alter TABLE HR_EMPLOYEES add constraint FK_HR_EMPLOYEES_CLUB_CODE
FOREIGN KEY (CLUB_CODE) REFERENCES HR_CLUB(CLUB_CODE)on update cascade;

alter TABLE HR_EMPLOYEES add constraint FK_HR_EMPLOYEES_ROLE_CODE
FOREIGN KEY (ROLE_CODE) REFERENCES HR_ROLE(ROLE_CODE)on update cascade;

alter TABLE HR_ACCOUNT add constraint FK_HR_ACCOUNT_EMP_NO
FOREIGN KEY (EMP_NO) REFERENCES HR_EMPLOYEES(EMP_NO)on update cascade;

alter table HR_BOARD add constraint FK_HR_BOARD_EMP_NO
FOREIGN KEY (EMP_NO) REFERENCES HR_EMPLOYEES(EMP_NO) ON UPDATE cascade;

alter table HR_REPLY add constraint FK_HR_REPLY_EMP_NO
foreign key (EMP_NO) references HR_EMPLOYEES(EMP_NO) on update cascade;

alter table HR_CLUB add constraint FK_HR_CLUB_EMP_NO
foreign key (EMP_NO) references HR_EMPLOYEES(EMP_NO) on update cascade;

alter table HR_CLUB_BOARD add constraint FK_HR_CLUB_BOARD_EMP_NO
foreign key (EMP_NO) references HR_EMPLOYEES(EMP_NO) on update cascade;

alter table HR_CLUB_REPLY add constraint FK_HR_CLUB_REPLY_EMP_NO
foreign key (EMP_NO) references HR_EMPLOYEES(EMP_NO) on update cascade;

alter table HR_CONFIRM_IN add constraint FK_HR_CONFIRM_IN_COUT_NO
foreign key (COUT_NO) references HR_CONFIRM_OUT(COUT_NO) on update cascade;

alter table HR_CONFIRM_IN add constraint FK_HR_CONFIRM_IN_EMP_NO
foreign key (EMP_NO) references HR_EMPLOYEES(EMP_NO) on update cascade;

alter table HR_CONFIRM_OUT add constraint FK_HR_CONFIRM_OUT_EMP_NO
foreign key (EMP_NO) references HR_EMPLOYEES(EMP_NO) on update cascade;

alter table HR_EMAIL add constraint FK_HR_EMAIL_EMP_NO
foreign key (EMP_NO) references HR_EMPLOYEES(EMP_NO) on update cascade;
